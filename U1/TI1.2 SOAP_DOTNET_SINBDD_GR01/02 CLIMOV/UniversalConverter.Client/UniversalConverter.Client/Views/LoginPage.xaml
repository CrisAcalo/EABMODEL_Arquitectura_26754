<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:UniversalConverter.Client.ViewModels"
             xmlns:converters="clr-namespace:UniversalConverter.Client.Converters"
             x:DataType="viewModels:LoginViewModel"
             x:Class="UniversalConverter.Client.Views.LoginPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#E9F7FA">

    <!-- Recursos y convertidores -->
    <ContentPage.Resources>
        <converters:IsNotNullConverter x:Key="IsNotNullConverter" />
    </ContentPage.Resources>

    <!-- Usamos un Grid para centrar perfectamente el contenido en la página -->
    <Grid VerticalOptions="Center" HorizontalOptions="Center">

        <Border StrokeShape="RoundRectangle 15"
                StrokeThickness="1"
                Stroke="#D0E7F0"
                BackgroundColor="White"
                Padding="30,40"
                WidthRequest="320">

            <VerticalStackLayout Spacing="15">

                <Image Source="sullivan.png"
                       HeightRequest="100"
                       WidthRequest="100"
                       HorizontalOptions="Center"/>

                <Label Text="Sistema de Autenticación"
                       FontSize="22"
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       TextColor="#043641"/>

                <Label Text="Servicios de Conversión de Unidades"
                       FontSize="12"
                       HorizontalTextAlignment="Center"
                       TextColor="#bbbbbb"/>

                <!-- Campo de Usuario -->
                <Label Text="Usuario:" 
                       FontSize="12"
                       TextColor="#043b57"/>
                <Entry Placeholder="Ingrese su usuario"
                       Text="{Binding Username}"
                       Margin="0,-5,0,0"/>

                <!-- Campo de Contraseña -->
                <Label Text="Contraseña:" 
                       FontSize="12"
                       TextColor="#043b57"/>
                <Entry Placeholder="Ingrese su contraseña"
                       Text="{Binding Password}"
                       IsPassword="True"
                       Margin="0,-5,0,0"/>

                <!-- Botón de Iniciar Sesión -->
                <Button Text="INICIAR SESIÓN"
                        Command="{Binding LoginCommand}"
                        IsEnabled="{Binding IsNotBusy}"
                        BackgroundColor="#043a46"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="10"
                        HeightRequest="50"
                        Margin="0,10,0,0"/>

                <!-- Mensaje de Error -->
                <Label Text="{Binding ErrorMessage}"
                       TextColor="Red"
                       IsVisible="{Binding ErrorMessage, Converter={StaticResource IsNotNullConverter}}"
                       HorizontalTextAlignment="Center"
                       FontSize="12"/>

                <!-- Indicador de Carga -->
                <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                   Color="#043a46"
                                   HorizontalOptions="Center"/>

            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>